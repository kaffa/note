<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="assets/xml/rss.xsl" media="all"?><rss version="2.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>琅環笔记</title><link>https://note.tt4e.com/</link><description>有博学强记者，尝为鹅厂从事。游于洞宫，遇一人于途，问逍遥曰：“君读书几何？”遥曰：“吾之未读者，则二十年内书盖有之也，若二十年外，则吾固已尽读之矣。”其人论议超然，遥颇内服，相与欢甚。因共至一处，大石中忽然有门，引遥入数歩，则别是天地，宫室嵯峨。引入一室中，陈书满架，其人曰：“此PL史也。”又至一室，则曰：“OS志也。”毎室各有奇书，惟一室屋宇颇高，封识甚严，有二犬守之。遥问故，答曰：“此皆操作系统、编程语言、算法分析、生发正骨诸秘籍。”指二犬曰：“此龙也。”历观诸室书，皆Windows以前事，多所未闻者，如「BeOS」、「Solaris」、「FreeBSD」、「LISP」亦皆在焉。遥心乐之，欲赁住数十日，其人笑曰：“君痴矣。此岂可赁地耶？”即命小童送出，遥问地名，对曰：“琅嬛福地也。”</description><atom:link href="https://note.tt4e.com/rss.xml" rel="self" type="application/rss+xml"></atom:link><language>zh_cn</language><copyright>Contents © 2024 &lt;a href="mailto:xiaoyao@tt4e.com"&gt;逍遥&lt;/a&gt; </copyright><lastBuildDate>Thu, 29 Feb 2024 02:37:55 GMT</lastBuildDate><generator>Nikola (getnikola.com)</generator><docs>http://blogs.law.harvard.edu/tech/rss</docs><item><title>Solution to "Could not chdir to home directory No such file or directory"</title><link>https://note.tt4e.com/posts/solution-to-could-not-chdir-to-home-directory-no-such-file-or-directory/</link><dc:creator>逍遥</dc:creator><description>&lt;section id="section-1"&gt;
&lt;h2&gt;两种登录模式&lt;/h2&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;&lt;p&gt;多用户登录模式，可读写全部文件。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;单用户登录模式，只可操作根目录下的文件，只能读操作。常用来检查和修复文件系统。&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/section&gt;
&lt;section id="section-2"&gt;
&lt;h2&gt;问题现象&lt;/h2&gt;
&lt;p&gt;当开机后，系统提示 "Cound not chdir to home directory /home/your_username No such file or directory"&lt;/p&gt;
&lt;p&gt;此时，尝试执行 &lt;code class="docutils literal"&gt;ls /home&lt;/code&gt; 会发现一无所获，表现为你的用户目录丢失了，非常惊悚。&lt;/p&gt;
&lt;/section&gt;
&lt;section id="section-3"&gt;
&lt;h2&gt;产生原因&lt;/h2&gt;
&lt;ol class="arabic"&gt;
&lt;li&gt;&lt;p&gt;黑客获得了你的系统权限，强制删除了你的用户目录。这一般是瞎扯的。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;用户创建目录和 zfs 挂载的先后顺序问题。&lt;/p&gt;
&lt;p&gt;详细来说，zfs 是一种高级文件系统，比如可以按需增加容量。&lt;/p&gt;
&lt;p&gt;通常我们会将用户目录放到 zfs 的池中管理，挂载点的对应关系在 zfs 的 dataset 中保存。&lt;/p&gt;
&lt;p&gt;此时，如果用户在 zfs 挂载 /usr/home 以前 (/home 是 /usr/home 的硬连接)，在目录 /home 下创建了目录，再挂载 zfs 的目录时，会覆盖 /home 目录。&lt;/p&gt;
&lt;p&gt;这里怎么理解？就好比目录和文件是对象，挂载点可以是层叠结构，后挂载的目录会指向同样的挂载点，而系统在挂载后，只会显示最后的挂载。&lt;/p&gt;
&lt;p&gt;此时，先前的目录和文件并没有丢失，只是被遮蔽了。&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/section&gt;
&lt;section id="section-4"&gt;
&lt;h2&gt;怎么处理&lt;/h2&gt;
&lt;p&gt;进入单用户登录模式登录，尝试执行 &lt;code class="docutils literal"&gt;ls /home&lt;/code&gt; ，一般会看到「丢失的」目录。&lt;/p&gt;
&lt;p&gt;确认这一点后，可以重新进入多用户模式，先用 unmount 命令强制停止挂载 /home 目录&lt;/p&gt;
&lt;div class="code"&gt;&lt;pre class="code sh"&gt;&lt;a id="rest_code_98a7706c0fb94ef09c659033817b8982-1" name="rest_code_98a7706c0fb94ef09c659033817b8982-1" href="https://note.tt4e.com/posts/solution-to-could-not-chdir-to-home-directory-no-such-file-or-directory/#rest_code_98a7706c0fb94ef09c659033817b8982-1"&gt;&lt;/a&gt;zfs&lt;span class="w"&gt; &lt;/span&gt;unmount&lt;span class="w"&gt; &lt;/span&gt;zroot/usr/home
&lt;/pre&gt;&lt;/div&gt;
&lt;/section&gt;
&lt;section id="section-5"&gt;
&lt;h2&gt;问题发现和解决过程&lt;/h2&gt;
&lt;p&gt;我在 &lt;a class="reference external" href="https://forums.freebsd.org/threads/lost-home-directory.89382/"&gt;https://forums.freebsd.org/threads/lost-home-directory.89382/&lt;/a&gt; 看到，问题可能与 ZFS 有关，在没有思路时，我请教了 OpenAI 的 ChatGPT 3.5，效果好的可怕。&lt;/p&gt;
&lt;p&gt;我的提示语如下：『你是协助我工作的精通FreeBSD系统的专家，此时我遇到一个问题向你请教。我的用户名是 xyz，当我从 multiple user mode 登录系统时，/home 和 /usr/home 下找不到 xyz 目录，但当我从 Single user mode 登录系统时，/home 和 /usr/home 下存在 xyz 目录，既存在 /home/xyz 和 /usr/home/xyz，请问现在如何做才可实现，当重启进入 multiple user mode 时依然看到 xyz 目录。我不清楚导致这个现象的原因是什么，可能是因为VPC异常关机，而我的 FreeBSD 是安装在 vpc 上的。』&lt;/p&gt;
&lt;p&gt;结果 ChatGPT 给与了初步判断，并给了我处理步骤和命令提示，我继续执行它给的命令，并将结果告诉它，它便接着提示，大约通过十多轮对话，它帮我找到了 zfs 和 mount 的原因，也让我理解了为什么会出现这样的问题。&lt;/p&gt;
&lt;p&gt;ChatGPT 真的可以，这里它做到了。&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;&lt;p&gt;帮助我弥补专业知识不足；&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;教这些专业知识，让我理解；&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;就问题给出解答步骤，并可以交互式推进；&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;所以，我说它真的不错，至少在缺少领域知识的场景下，提高了问题解决的可能性，并缩短了问题解决的时间。&lt;/p&gt;
&lt;p&gt;但，这里应看到的时，我们有一个共识：基于 FreeBSD 的存在和表现，它并不会出现无端丢失目录和文件的问题，如果你怀疑，就是在怀疑世界上聪明人的数量，及它们为热爱事物所付出的努力。&lt;/p&gt;
&lt;p&gt;如果遇到 FreeBSD 的类似问题，你有此怀疑，这说明，你的思维方式不在正途，你不对劲。&lt;/p&gt;
&lt;/section&gt;</description><category>freebsd</category><category>mount</category><category>zfs</category><guid>https://note.tt4e.com/posts/solution-to-could-not-chdir-to-home-directory-no-such-file-or-directory/</guid><pubDate>Wed, 28 Feb 2024 14:52:30 GMT</pubDate></item><item><title>Sudo unable to resolve host On Ubuntu</title><link>https://note.tt4e.com/posts/sudo-unable-to-resolve-host-on-ubuntu/</link><dc:creator>逍遥</dc:creator><description>&lt;section id="section-1"&gt;
&lt;h2&gt;直接给答案&lt;/h2&gt;
&lt;p&gt;在 /etc/hosts 文件中加入主机名，比如:&lt;/p&gt;
&lt;pre class="literal-block"&gt;127.0.0.1    ubuntu.tt.com&lt;/pre&gt;
&lt;/section&gt;</description><category>ubuntu</category><guid>https://note.tt4e.com/posts/sudo-unable-to-resolve-host-on-ubuntu/</guid><pubDate>Thu, 08 Feb 2024 11:26:44 GMT</pubDate></item><item><title>Download Edge Browser Starter Background Image</title><link>https://note.tt4e.com/posts/download-edge-browser-starter-background-image/</link><dc:creator>逍遥</dc:creator><description>&lt;section id="section-1"&gt;
&lt;h2&gt;直给答案&lt;/h2&gt;
&lt;p&gt;浏览器地址打开 &lt;a class="reference external" href="chrome-search://theme/IDR_THEME_NTP_BACKGROUND"&gt;链接&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;如果是旧图，可以按 &lt;kbd&gt;Ctrl+&lt;kdb&gt;F5&lt;/kdb&gt;&lt;/kbd&gt; 刷新。&lt;/p&gt;&lt;/section&gt;</description><category>Edge</category><guid>https://note.tt4e.com/posts/download-edge-browser-starter-background-image/</guid><pubDate>Thu, 08 Feb 2024 10:36:48 GMT</pubDate></item><item><title>Reset Ubuntu Linux Password</title><link>https://note.tt4e.com/posts/reset-ubuntu-linux-password/</link><dc:creator>逍遥</dc:creator><description>&lt;section id="section-1"&gt;
&lt;h2&gt;前提&lt;/h2&gt;
&lt;p&gt;须具有本地权限，通俗的说就是，需要肉身在服务器旁边。&lt;/p&gt;
&lt;/section&gt;
&lt;section id="section-2"&gt;
&lt;h2&gt;步骤&lt;/h2&gt;
&lt;ol class="arabic"&gt;
&lt;li&gt;&lt;p&gt;启动服务器时按住 Shift 键，会进入 GNU GRUB  version x.yz... 界面&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;在 GNU GRUB  version x.yz... 界面下方至少会出现以下选项：&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;p&gt;Ubuntu&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;*Advanced options for Ubuntu&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;选择 Advanced options for Ubuntu，按回车键；&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;出现新的选项：&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;p&gt;Ubuntu, with Linux ...&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;*Ubuntu, with Linux ... (recovery mode)&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;选择带有 (recovery mode) 的一行，按回车键；&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;系统会显示一些输出并跳转到 Recovery Menu 菜单界面，选项如下：&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;p&gt;resume&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;clean&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;dpkg&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;failsafeX&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;fsck&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;grub&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;network&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;root&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;system-summary&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;选择 root，按回车键&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;重新 mount 具有写权限的 root，运行命令：:&lt;/p&gt;
&lt;pre class="literal-block"&gt;mount -rw -o remount /&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;使用 &lt;code class="docutils literal"&gt;ls /home&lt;/code&gt; 命令可以查看用户名，假设是 USER1，则使用如下命令重置密码:&lt;/p&gt;
&lt;pre class="literal-block"&gt;passwd USER1&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;根据命令提示，你可以完成密码修改，然后退出到 Recovery Menu，选择 resume 重启，然后就可以使用上一步修改的新密码进入系统了。&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/section&gt;</description><category>ubuntu</category><guid>https://note.tt4e.com/posts/reset-ubuntu-linux-password/</guid><pubDate>Wed, 07 Feb 2024 22:47:39 GMT</pubDate></item><item><title>Get Localhost IPv6 with Python</title><link>https://note.tt4e.com/posts/get-localhost-ipv6-with-python/</link><dc:creator>逍遥</dc:creator><description>&lt;div class="code"&gt;&lt;pre class="code python"&gt;&lt;a id="rest_code_a705faf2e42140d2acd260b3c3194f5d-1" name="rest_code_a705faf2e42140d2acd260b3c3194f5d-1" href="https://note.tt4e.com/posts/get-localhost-ipv6-with-python/#rest_code_a705faf2e42140d2acd260b3c3194f5d-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;get_ipv6&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
&lt;a id="rest_code_a705faf2e42140d2acd260b3c3194f5d-2" name="rest_code_a705faf2e42140d2acd260b3c3194f5d-2" href="https://note.tt4e.com/posts/get-localhost-ipv6-with-python/#rest_code_a705faf2e42140d2acd260b3c3194f5d-2"&gt;&lt;/a&gt;    &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;socket&lt;/span&gt;
&lt;a id="rest_code_a705faf2e42140d2acd260b3c3194f5d-3" name="rest_code_a705faf2e42140d2acd260b3c3194f5d-3" href="https://note.tt4e.com/posts/get-localhost-ipv6-with-python/#rest_code_a705faf2e42140d2acd260b3c3194f5d-3"&gt;&lt;/a&gt;    &lt;span class="n"&gt;host_ipv6&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[]&lt;/span&gt;
&lt;a id="rest_code_a705faf2e42140d2acd260b3c3194f5d-4" name="rest_code_a705faf2e42140d2acd260b3c3194f5d-4" href="https://note.tt4e.com/posts/get-localhost-ipv6-with-python/#rest_code_a705faf2e42140d2acd260b3c3194f5d-4"&gt;&lt;/a&gt;    &lt;span class="n"&gt;ips&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;socket&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;getaddrinfo&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;socket&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;gethostname&lt;/span&gt;&lt;span class="p"&gt;(),&lt;/span&gt;&lt;span class="mi"&gt;80&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a id="rest_code_a705faf2e42140d2acd260b3c3194f5d-5" name="rest_code_a705faf2e42140d2acd260b3c3194f5d-5" href="https://note.tt4e.com/posts/get-localhost-ipv6-with-python/#rest_code_a705faf2e42140d2acd260b3c3194f5d-5"&gt;&lt;/a&gt;    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;ip&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;ips&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;a id="rest_code_a705faf2e42140d2acd260b3c3194f5d-6" name="rest_code_a705faf2e42140d2acd260b3c3194f5d-6" href="https://note.tt4e.com/posts/get-localhost-ipv6-with-python/#rest_code_a705faf2e42140d2acd260b3c3194f5d-6"&gt;&lt;/a&gt;        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;ip&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;][&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;startswith&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'24'&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
&lt;a id="rest_code_a705faf2e42140d2acd260b3c3194f5d-7" name="rest_code_a705faf2e42140d2acd260b3c3194f5d-7" href="https://note.tt4e.com/posts/get-localhost-ipv6-with-python/#rest_code_a705faf2e42140d2acd260b3c3194f5d-7"&gt;&lt;/a&gt;            &lt;span class="c1"&gt;# 2408 中国联通&lt;/span&gt;
&lt;a id="rest_code_a705faf2e42140d2acd260b3c3194f5d-8" name="rest_code_a705faf2e42140d2acd260b3c3194f5d-8" href="https://note.tt4e.com/posts/get-localhost-ipv6-with-python/#rest_code_a705faf2e42140d2acd260b3c3194f5d-8"&gt;&lt;/a&gt;            &lt;span class="c1"&gt;# 2409 中国移动&lt;/span&gt;
&lt;a id="rest_code_a705faf2e42140d2acd260b3c3194f5d-9" name="rest_code_a705faf2e42140d2acd260b3c3194f5d-9" href="https://note.tt4e.com/posts/get-localhost-ipv6-with-python/#rest_code_a705faf2e42140d2acd260b3c3194f5d-9"&gt;&lt;/a&gt;            &lt;span class="c1"&gt;# 240e 中国电信&lt;/span&gt;
&lt;a id="rest_code_a705faf2e42140d2acd260b3c3194f5d-10" name="rest_code_a705faf2e42140d2acd260b3c3194f5d-10" href="https://note.tt4e.com/posts/get-localhost-ipv6-with-python/#rest_code_a705faf2e42140d2acd260b3c3194f5d-10"&gt;&lt;/a&gt;            &lt;span class="n"&gt;host_ipv6&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;append&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ip&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;][&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;
&lt;a id="rest_code_a705faf2e42140d2acd260b3c3194f5d-11" name="rest_code_a705faf2e42140d2acd260b3c3194f5d-11" href="https://note.tt4e.com/posts/get-localhost-ipv6-with-python/#rest_code_a705faf2e42140d2acd260b3c3194f5d-11"&gt;&lt;/a&gt;    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;host_ipv6&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;</description><category>IPv6</category><guid>https://note.tt4e.com/posts/get-localhost-ipv6-with-python/</guid><pubDate>Thu, 25 Jan 2024 04:14:56 GMT</pubDate></item><item><title>Dig Installation on FreeBSD</title><link>https://note.tt4e.com/posts/dig-installation-on-freebsd/</link><dc:creator>逍遥</dc:creator><description>&lt;p&gt;su 后，使用有权限的用户安装以下 package&lt;/p&gt;
&lt;div class="code"&gt;&lt;pre class="code sh"&gt;&lt;a id="rest_code_918a94a74b53444488d3d2ad8f3edf5d-1" name="rest_code_918a94a74b53444488d3d2ad8f3edf5d-1" href="https://note.tt4e.com/posts/dig-installation-on-freebsd/#rest_code_918a94a74b53444488d3d2ad8f3edf5d-1"&gt;&lt;/a&gt;pkg&lt;span class="w"&gt; &lt;/span&gt;install&lt;span class="w"&gt; &lt;/span&gt;dns/bind-tools
&lt;/pre&gt;&lt;/div&gt;</description><category>dig</category><category>freebsd</category><guid>https://note.tt4e.com/posts/dig-installation-on-freebsd/</guid><pubDate>Sun, 21 Jan 2024 18:53:20 GMT</pubDate></item><item><title>设置 Windows Cmd 使用代理服务器的方法</title><link>https://note.tt4e.com/posts/how-to-config-windows-cmd-proxy/</link><dc:creator>逍遥</dc:creator><description>&lt;section id="windows-cmd-proxy"&gt;
&lt;h2&gt;Windows cmd proxy 直给答案&lt;/h2&gt;
&lt;div class="code"&gt;&lt;pre class="code bash"&gt;&lt;a id="rest_code_0c9ea877fe984d1eb75a7057c968950e-1" name="rest_code_0c9ea877fe984d1eb75a7057c968950e-1" href="https://note.tt4e.com/posts/how-to-config-windows-cmd-proxy/#rest_code_0c9ea877fe984d1eb75a7057c968950e-1"&gt;&lt;/a&gt;&lt;span class="nb"&gt;set&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;proxy&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;http://127.0.0.1:6868
&lt;a id="rest_code_0c9ea877fe984d1eb75a7057c968950e-2" name="rest_code_0c9ea877fe984d1eb75a7057c968950e-2" href="https://note.tt4e.com/posts/how-to-config-windows-cmd-proxy/#rest_code_0c9ea877fe984d1eb75a7057c968950e-2"&gt;&lt;/a&gt;&lt;span class="nb"&gt;set&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;proxy&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;https://127.0.0.1:6868
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;看起来，也适用于 Linux FreeBSD&lt;/p&gt;
&lt;/section&gt;</description><category>cmd</category><category>proxy</category><guid>https://note.tt4e.com/posts/how-to-config-windows-cmd-proxy/</guid><pubDate>Sat, 20 Jan 2024 01:14:15 GMT</pubDate></item><item><title>SQLite Error database disk image is malformed by PyCharm</title><link>https://note.tt4e.com/posts/sqlite-error-database-disk-image-is-malformed-by-pycharm/</link><dc:creator>逍遥</dc:creator><description>&lt;section id="tips"&gt;
&lt;h2&gt;大多数 Tips 背后总能找到一个设计错误&lt;/h2&gt;
&lt;p&gt;Tips 之所以让人眼前一亮，那是因为这个 Tips 的结构不寻常。&lt;/p&gt;
&lt;p&gt;大体上，是因为设计者没有想到，或者想到了，但没有设计好导致的。&lt;/p&gt;
&lt;p&gt;比如下面这个：&lt;/p&gt;
&lt;/section&gt;
&lt;section id="database-disk-image-is-malformed"&gt;
&lt;h2&gt;database disk image is malformed&lt;/h2&gt;
&lt;p&gt;SQLite 提示 "database disk image is malformed"&lt;/p&gt;
&lt;p&gt;看起来很惊悚，说是数据库磁盘镜像畸形了。&lt;/p&gt;
&lt;p&gt;第一感觉似乎是磁盘硬件坏道了？&lt;/p&gt;
&lt;/section&gt;
&lt;section id="section-1"&gt;
&lt;h2&gt;问题重现&lt;/h2&gt;
&lt;p&gt;当我在 PyCharm 中选中了项目的根目录后，在菜单 File -&amp;gt; File Properties -&amp;gt; Line Separators 的切换后，SQLite 数据库文件报错了；&lt;/p&gt;
&lt;p&gt;我进行这个操作的主要原因是，每当我添加文件到 git 时，以 LF 为分隔符的 sitemap.xml 文件总是有一个 warning；&lt;/p&gt;
&lt;p&gt;而这个报错的主要原因，被证明是一个 Python 2 的遗留问题导致的。&lt;/p&gt;
&lt;div class="code"&gt;&lt;pre class="code bash"&gt;&lt;a id="rest_code_379ce1ae869c478ca4824bb6508fa083-1" name="rest_code_379ce1ae869c478ca4824bb6508fa083-1" href="https://note.tt4e.com/posts/sqlite-error-database-disk-image-is-malformed-by-pycharm/#rest_code_379ce1ae869c478ca4824bb6508fa083-1"&gt;&lt;/a&gt;&amp;gt;git&lt;span class="w"&gt; &lt;/span&gt;add&lt;span class="w"&gt; &lt;/span&gt;.
&lt;a id="rest_code_379ce1ae869c478ca4824bb6508fa083-2" name="rest_code_379ce1ae869c478ca4824bb6508fa083-2" href="https://note.tt4e.com/posts/sqlite-error-database-disk-image-is-malformed-by-pycharm/#rest_code_379ce1ae869c478ca4824bb6508fa083-2"&gt;&lt;/a&gt;warning:&lt;span class="w"&gt; &lt;/span&gt;LF&lt;span class="w"&gt; &lt;/span&gt;will&lt;span class="w"&gt; &lt;/span&gt;be&lt;span class="w"&gt; &lt;/span&gt;replaced&lt;span class="w"&gt; &lt;/span&gt;by&lt;span class="w"&gt; &lt;/span&gt;CRLF&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;in&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;docs/sitemap.xml.
&lt;a id="rest_code_379ce1ae869c478ca4824bb6508fa083-3" name="rest_code_379ce1ae869c478ca4824bb6508fa083-3" href="https://note.tt4e.com/posts/sqlite-error-database-disk-image-is-malformed-by-pycharm/#rest_code_379ce1ae869c478ca4824bb6508fa083-3"&gt;&lt;/a&gt;The&lt;span class="w"&gt; &lt;/span&gt;file&lt;span class="w"&gt; &lt;/span&gt;will&lt;span class="w"&gt; &lt;/span&gt;have&lt;span class="w"&gt; &lt;/span&gt;its&lt;span class="w"&gt; &lt;/span&gt;original&lt;span class="w"&gt; &lt;/span&gt;line&lt;span class="w"&gt; &lt;/span&gt;endings&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;in&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;your&lt;span class="w"&gt; &lt;/span&gt;working&lt;span class="w"&gt; &lt;/span&gt;directory
&lt;/pre&gt;&lt;/div&gt;
&lt;/section&gt;
&lt;section id="section-2"&gt;
&lt;h2&gt;问题原因&lt;/h2&gt;
&lt;p&gt;没有充分证实，但非常有可能是 LF 到 CRLF 的替换损坏了 SQLite 的数据库文件。&lt;/p&gt;
&lt;p&gt;你想问问 PyCharm，你怎么这么蠢？&lt;/p&gt;
&lt;p&gt;PyCharm 可能会说，怪我干什么，我只是个工具！&lt;/p&gt;
&lt;p&gt;但我认为吧，PyCharm 确实有理由识别这是一个数据库文件吧，毕竟你是可以直接打开浏览和处理的。&lt;/p&gt;
&lt;p&gt;好在此处，是之用到 SQLite 作为数据生成的本地缓存，且在 GitHub 上有备份，于是拿了一份下来本地覆盖既修复了。&lt;/p&gt;
&lt;/section&gt;</description><category>pycharm</category><category>sqlite</category><guid>https://note.tt4e.com/posts/sqlite-error-database-disk-image-is-malformed-by-pycharm/</guid><pubDate>Wed, 13 Dec 2023 13:14:50 GMT</pubDate></item><item><title>The different linesep between codecs open and open in python 3</title><link>https://note.tt4e.com/posts/the-different-linesep-between-codecs-open-and-open-in-python-3/</link><dc:creator>逍遥</dc:creator><description>&lt;section id="section-1"&gt;
&lt;h2&gt;文件分隔符之回车换行的故事&lt;/h2&gt;
&lt;p&gt;最初的打字机上，将打字位置 Carriage 从行末移动到行首叫做 Carriage Return，既CR，既回车，将纸张上滚一行，叫做换行 Linefeed。&lt;/p&gt;
&lt;p&gt;来到计算机时代，分别为这两种操作都定义了 ASCII 码&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;&lt;p&gt;ASCII \n: CR，Carriage Return，UNIX 上是行分隔符，newline，取第一个字；macOS 也采用了此换行符；&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;ASCII \r: LF，Linefeed，Classic Mac OS 中，文件换行符是这个；&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;ASCII \r\n: CRLF，Carriage Return &amp;amp; Linefeed，Windows 最晚出现，为在 Windows 上能显示 Unix 和 Apple Mac OS 文件内容，弄出一个兼容的。&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/section&gt;
&lt;section id="python"&gt;
&lt;h2&gt;Python 世界的换行&lt;/h2&gt;
&lt;p&gt;为兼容各平台差异，Python 的 os 模块中弄出多个属性来处理，比如&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;p&gt;linesep 行分隔符&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;sep 文件路径名分割符&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;pathsep 文件路径分隔符&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;curdir 当前工作目录&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;pardir 父目录&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;os 模块是处理好了这件事，但其它模块却不一定。&lt;/p&gt;
&lt;/section&gt;
&lt;section id="python-2"&gt;
&lt;h2&gt;Python 2 的写文件&lt;/h2&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;&lt;p&gt;open()，可能最早从 c 语言 fopen 学习的，未考虑编码参数&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;codecs.open()，支持编码参数&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;io.open()，支持编码参数的 open()，推荐使用&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/section&gt;
&lt;section id="python-3"&gt;
&lt;h2&gt;Python 3 的写文件&lt;/h2&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;&lt;p&gt;open()，修正了 Python 2 时代的设计遗漏，支持 encoding 和 newline 参数&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;codecs.open()，在读写文件时不推荐使用了，且此模块方法在 Windows 下有坑，文件换行符会弄成 LF&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/section&gt;
&lt;section id="section-2"&gt;
&lt;h2&gt;不同平台的差异随处可见&lt;/h2&gt;
&lt;p&gt;一定程度上反映了，人各有各的思想，分久必合，当人们无法忍受差异时，就会发展为统一。&lt;/p&gt;
&lt;/section&gt;</description><category>linesep</category><category>newline</category><category>python</category><guid>https://note.tt4e.com/posts/the-different-linesep-between-codecs-open-and-open-in-python-3/</guid><pubDate>Wed, 13 Dec 2023 12:01:17 GMT</pubDate></item><item><title>Absolute and Relative Path in Python</title><link>https://note.tt4e.com/posts/absolute-and-relative-path-in-python/</link><dc:creator>逍遥</dc:creator><description>&lt;section id="os-path-isabs"&gt;
&lt;h2&gt;1. os.path.isabs()&lt;/h2&gt;
&lt;p&gt;os.path.isabs() 的行为是：如果路径以 / 开头，或者在非类 Unix 平台上，以盘符跟一个 os.sep 开头，就返回 True；否则，就返回 False&lt;/p&gt;
&lt;p&gt;这里要注意的是在 Windows 上，是支持两种斜线符号的，一种是Windows的斜线，但需要双写以转义 '\'，另一种是类似 Unix 反写 '/'。&lt;/p&gt;
&lt;p&gt;看如下代码，在 Windows 下的返回结果&lt;/p&gt;
&lt;div class="code"&gt;&lt;pre class="code python"&gt;&lt;a id="rest_code_b600c9119a6b4db39eb1afcb24bf8c7e-1" name="rest_code_b600c9119a6b4db39eb1afcb24bf8c7e-1" href="https://note.tt4e.com/posts/absolute-and-relative-path-in-python/#rest_code_b600c9119a6b4db39eb1afcb24bf8c7e-1"&gt;&lt;/a&gt;&lt;span class="n"&gt;Python&lt;/span&gt; &lt;span class="mf"&gt;3.10.6&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;tags&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;v3&lt;/span&gt;&lt;span class="mf"&gt;.10.6&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;9&lt;/span&gt;&lt;span class="n"&gt;c7b4bd&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Aug&lt;/span&gt;  &lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="mi"&gt;2022&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;21&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;53&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;49&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;MSC&lt;/span&gt; &lt;span class="n"&gt;v&lt;/span&gt;&lt;span class="mf"&gt;.1932&lt;/span&gt; &lt;span class="mi"&gt;64&lt;/span&gt; &lt;span class="n"&gt;bit&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;AMD64&lt;/span&gt;&lt;span class="p"&gt;)]&lt;/span&gt; &lt;span class="n"&gt;on&lt;/span&gt; &lt;span class="n"&gt;win32&lt;/span&gt;
&lt;a id="rest_code_b600c9119a6b4db39eb1afcb24bf8c7e-2" name="rest_code_b600c9119a6b4db39eb1afcb24bf8c7e-2" href="https://note.tt4e.com/posts/absolute-and-relative-path-in-python/#rest_code_b600c9119a6b4db39eb1afcb24bf8c7e-2"&gt;&lt;/a&gt;&lt;span class="n"&gt;Type&lt;/span&gt; &lt;span class="s2"&gt;"help"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;"copyright"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;"credits"&lt;/span&gt; &lt;span class="ow"&gt;or&lt;/span&gt; &lt;span class="s2"&gt;"license"&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;more&lt;/span&gt; &lt;span class="n"&gt;information&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;
&lt;a id="rest_code_b600c9119a6b4db39eb1afcb24bf8c7e-3" name="rest_code_b600c9119a6b4db39eb1afcb24bf8c7e-3" href="https://note.tt4e.com/posts/absolute-and-relative-path-in-python/#rest_code_b600c9119a6b4db39eb1afcb24bf8c7e-3"&gt;&lt;/a&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;os&lt;/span&gt;
&lt;a id="rest_code_b600c9119a6b4db39eb1afcb24bf8c7e-4" name="rest_code_b600c9119a6b4db39eb1afcb24bf8c7e-4" href="https://note.tt4e.com/posts/absolute-and-relative-path-in-python/#rest_code_b600c9119a6b4db39eb1afcb24bf8c7e-4"&gt;&lt;/a&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;os&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;isabs&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'c:/abc'&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a id="rest_code_b600c9119a6b4db39eb1afcb24bf8c7e-5" name="rest_code_b600c9119a6b4db39eb1afcb24bf8c7e-5" href="https://note.tt4e.com/posts/absolute-and-relative-path-in-python/#rest_code_b600c9119a6b4db39eb1afcb24bf8c7e-5"&gt;&lt;/a&gt;&lt;span class="kc"&gt;True&lt;/span&gt;
&lt;a id="rest_code_b600c9119a6b4db39eb1afcb24bf8c7e-6" name="rest_code_b600c9119a6b4db39eb1afcb24bf8c7e-6" href="https://note.tt4e.com/posts/absolute-and-relative-path-in-python/#rest_code_b600c9119a6b4db39eb1afcb24bf8c7e-6"&gt;&lt;/a&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;os&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;isabs&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'/abc'&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a id="rest_code_b600c9119a6b4db39eb1afcb24bf8c7e-7" name="rest_code_b600c9119a6b4db39eb1afcb24bf8c7e-7" href="https://note.tt4e.com/posts/absolute-and-relative-path-in-python/#rest_code_b600c9119a6b4db39eb1afcb24bf8c7e-7"&gt;&lt;/a&gt;&lt;span class="kc"&gt;True&lt;/span&gt;
&lt;a id="rest_code_b600c9119a6b4db39eb1afcb24bf8c7e-8" name="rest_code_b600c9119a6b4db39eb1afcb24bf8c7e-8" href="https://note.tt4e.com/posts/absolute-and-relative-path-in-python/#rest_code_b600c9119a6b4db39eb1afcb24bf8c7e-8"&gt;&lt;/a&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;os&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;isabs&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'c:&lt;/span&gt;&lt;span class="se"&gt;\a&lt;/span&gt;&lt;span class="s1"&gt;bc'&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="c1"&gt;# 未转义，错误&lt;/span&gt;
&lt;a id="rest_code_b600c9119a6b4db39eb1afcb24bf8c7e-9" name="rest_code_b600c9119a6b4db39eb1afcb24bf8c7e-9" href="https://note.tt4e.com/posts/absolute-and-relative-path-in-python/#rest_code_b600c9119a6b4db39eb1afcb24bf8c7e-9"&gt;&lt;/a&gt;&lt;span class="kc"&gt;False&lt;/span&gt;
&lt;a id="rest_code_b600c9119a6b4db39eb1afcb24bf8c7e-10" name="rest_code_b600c9119a6b4db39eb1afcb24bf8c7e-10" href="https://note.tt4e.com/posts/absolute-and-relative-path-in-python/#rest_code_b600c9119a6b4db39eb1afcb24bf8c7e-10"&gt;&lt;/a&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;os&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;isabs&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'c:/abc'&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a id="rest_code_b600c9119a6b4db39eb1afcb24bf8c7e-11" name="rest_code_b600c9119a6b4db39eb1afcb24bf8c7e-11" href="https://note.tt4e.com/posts/absolute-and-relative-path-in-python/#rest_code_b600c9119a6b4db39eb1afcb24bf8c7e-11"&gt;&lt;/a&gt;&lt;span class="kc"&gt;True&lt;/span&gt;
&lt;a id="rest_code_b600c9119a6b4db39eb1afcb24bf8c7e-12" name="rest_code_b600c9119a6b4db39eb1afcb24bf8c7e-12" href="https://note.tt4e.com/posts/absolute-and-relative-path-in-python/#rest_code_b600c9119a6b4db39eb1afcb24bf8c7e-12"&gt;&lt;/a&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;os&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;isabs&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'c:&lt;/span&gt;&lt;span class="se"&gt;\\&lt;/span&gt;&lt;span class="s1"&gt;abc'&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a id="rest_code_b600c9119a6b4db39eb1afcb24bf8c7e-13" name="rest_code_b600c9119a6b4db39eb1afcb24bf8c7e-13" href="https://note.tt4e.com/posts/absolute-and-relative-path-in-python/#rest_code_b600c9119a6b4db39eb1afcb24bf8c7e-13"&gt;&lt;/a&gt;&lt;span class="kc"&gt;True&lt;/span&gt;
&lt;a id="rest_code_b600c9119a6b4db39eb1afcb24bf8c7e-14" name="rest_code_b600c9119a6b4db39eb1afcb24bf8c7e-14" href="https://note.tt4e.com/posts/absolute-and-relative-path-in-python/#rest_code_b600c9119a6b4db39eb1afcb24bf8c7e-14"&gt;&lt;/a&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;os&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;isabs&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'&lt;/span&gt;&lt;span class="se"&gt;\\&lt;/span&gt;&lt;span class="s1"&gt;abc'&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a id="rest_code_b600c9119a6b4db39eb1afcb24bf8c7e-15" name="rest_code_b600c9119a6b4db39eb1afcb24bf8c7e-15" href="https://note.tt4e.com/posts/absolute-and-relative-path-in-python/#rest_code_b600c9119a6b4db39eb1afcb24bf8c7e-15"&gt;&lt;/a&gt;&lt;span class="kc"&gt;True&lt;/span&gt;
&lt;a id="rest_code_b600c9119a6b4db39eb1afcb24bf8c7e-16" name="rest_code_b600c9119a6b4db39eb1afcb24bf8c7e-16" href="https://note.tt4e.com/posts/absolute-and-relative-path-in-python/#rest_code_b600c9119a6b4db39eb1afcb24bf8c7e-16"&gt;&lt;/a&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;os&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;isabs&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'abc'&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a id="rest_code_b600c9119a6b4db39eb1afcb24bf8c7e-17" name="rest_code_b600c9119a6b4db39eb1afcb24bf8c7e-17" href="https://note.tt4e.com/posts/absolute-and-relative-path-in-python/#rest_code_b600c9119a6b4db39eb1afcb24bf8c7e-17"&gt;&lt;/a&gt;&lt;span class="kc"&gt;False&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;所以说，实际上这个方法在 Windows 并不好用，试着查看源代码，但实现并不是 Python 的，似乎有 macpath,posixpath,ntpath，但 ntpath 在 Windows 上返回就是上述值。&lt;/p&gt;
&lt;/section&gt;
&lt;section id="pathlib-path-is-absolute-windows"&gt;
&lt;h2&gt;2. pathlib.Path().is_absolute() 在 Windows 上更好用&lt;/h2&gt;
&lt;p&gt;实际上判断是否绝对路径时，应该使用以下代码&lt;/p&gt;
&lt;div class="code"&gt;&lt;pre class="code python"&gt;&lt;a id="rest_code_ffb51a6001254d0d92e6ccf5627106e4-1" name="rest_code_ffb51a6001254d0d92e6ccf5627106e4-1" href="https://note.tt4e.com/posts/absolute-and-relative-path-in-python/#rest_code_ffb51a6001254d0d92e6ccf5627106e4-1"&gt;&lt;/a&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;pathlib&lt;/span&gt;
&lt;a id="rest_code_ffb51a6001254d0d92e6ccf5627106e4-2" name="rest_code_ffb51a6001254d0d92e6ccf5627106e4-2" href="https://note.tt4e.com/posts/absolute-and-relative-path-in-python/#rest_code_ffb51a6001254d0d92e6ccf5627106e4-2"&gt;&lt;/a&gt;&lt;span class="n"&gt;pathlib&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Path&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'/abc'&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;is_absolute&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/section&gt;</description><category>path</category><category>python</category><guid>https://note.tt4e.com/posts/absolute-and-relative-path-in-python/</guid><pubDate>Thu, 07 Dec 2023 00:12:45 GMT</pubDate></item></channel></rss>